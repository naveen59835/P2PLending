<div class="fixed-container" style="height: 500px; overflow: auto;">
  <div class="register-logo">
    <mat-icon>lock</mat-icon>
  </div>
  <h1>Borrower Details</h1>
  <h2>Edit Profile</h2>
  <div id="button-container">
    <div *ngIf="!editMode && borrowerDetails">
      <button class="edit-button" mat-icon-button color="primary" (click)="onEdit()">
        <mat-icon>edit</mat-icon> Edit
      </button>
    </div>

    <div *ngIf="editMode && borrowerDetails">
      <button class="save-button" mat-icon-button color="primary" [disabled]="myForm.invalid" (click)="onSave(borrowerDetails)" >
        <mat-icon>save</mat-icon> Save
      </button>

      <button class="cancel-button" mat-icon-button color="warn" (click)="editMode=false">
        <mat-icon>cancel</mat-icon> Cancel
      </button>
    </div>
  </div>

  <form #myForm="ngForm" (ngSubmit)="onSave(myForm)">

  <div class="name">
    <mat-form-field appearance="outline">
      <mat-label>First Name</mat-label>
      <input [(ngModel)]="borrowerDetails.firstName" name="firstName" matInput [disabled]="!editMode"
        minlength="3" #firstName="ngModel">
      <mat-error *ngIf="firstName.invalid && (firstName.dirty || firstName.touched)">
        First Name must be at least 3 characters long.
      </mat-error>
    </mat-form-field>


    <mat-form-field appearance="outline">
      <mat-label>Last Name</mat-label>
      <input [(ngModel)]="borrowerDetails.lastName" name="lastName" matInput [disabled]="!editMode"
        minlength="3" #lastName="ngModel">
      <mat-error *ngIf="lastName.invalid && (lastName.dirty || lastName.touched)">
        Last Name must be at least 3 characters long.
      </mat-error>
    </mat-form-field>

  </div>

  <mat-form-field appearance="fill">
    <mat-label>Email</mat-label>
    <input [(ngModel)]="borrowerDetails.emailId" name="emailId" matInput [disabled]="true" required minlength="3">
    <mat-error *ngIf="isFieldInvalid('emailId')">Please enter a valid email address with at least 3 characters.</mat-error>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Aadhaar No:</mat-label>
    <input [(ngModel)]="borrowerDetails.aadhaarNo" name="aadhaarNo" matInput [disabled]="!editMode"
      [ngModelOptions]="{updateOn: 'blur'}" minlength="12" #aadhaarNo="ngModel">
    <mat-error *ngIf="aadhaarNo.invalid && (aadhaarNo.dirty || aadhaarNo.touched)">
      Aadhaar number must be at least 12 characters long.
    </mat-error>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Registered Mobile Number</mat-label>
    <input [(ngModel)]="borrowerDetails.phoneNo" name="phoneNo" matInput [disabled]="!editMode"
      [ngModelOptions]="{updateOn: 'blur'}" minlength="10" maxlength="10" pattern="^[6-9]\d{9}$"
      #phoneNo="ngModel">
    <mat-error *ngIf="phoneNo.invalid && (phoneNo.dirty || phoneNo.touched)">
      Phone number must be a 10-digit number starting with 6, 7, 8 or 9.
    </mat-error>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>PAN No:</mat-label>
    <input [(ngModel)]="borrowerDetails.panNo" name="panNo" matInput [disabled]="!editMode"
      [ngModelOptions]="{updateOn: 'blur'}" minlength="10" #panNo="ngModel">
    <mat-error *ngIf="panNo.invalid && (panNo.dirty || panNo.touched)">
      PAN number must be at least 10 characters long.
    </mat-error>
  </mat-form-field>



  <div class="file-upload-container" [ngClass]="{'disabled': !editMode}">
    <div class="file-upload">
      <label for="aadharImageInput" class="file-upload-label"><i class="fa fa-cloud-upload"></i>Upload Aadhar Photo</label>
      <button (click)="onUploadButtonClick($event, 'aadhar')" class="file-upload-btn" [disabled]="!editMode">Upload</button>
      <input type="file" id="aadharImageInput" name="aadharImage" accept=".jpg,.jpeg,.png" [disabled]="!editMode" class="file-upload-input" style="display:none;">
      <p id="aadharFileName" class="file-upload-file-name"></p>
      <p id="aadharUploadMessage"></p>
    </div>

    <div class="file-upload">
      <label for="panImageInput" class="file-upload-label"><i class="fa fa-cloud-upload"></i>Upload PAN Photo</label>
      <button (click)="onUploadButtonClick($event, 'pan')" class="file-upload-btn" [disabled]="!editMode">Upload</button>
      <input type="file" id="panImageInput" name="panImage" accept=".jpg,.jpeg,.png" [disabled]="!editMode" class="file-upload-input" style="display:none;">
      <p id="panFileName" class="file-upload-file-name"></p>
      <p id="panUploadMessage"></p>
    </div>

    <div class="file-upload">
      <label for="cibilImageInput" class="file-upload-label"><i class="fa fa-cloud-upload"></i>Upload Cibil Photo</label>
      <button (click)="onUploadButtonClick($event, 'cibil')" class="file-upload-btn" [disabled]="!editMode">Upload</button>
      <input type="file" id="cibilImageInput" name="cibilImage" accept=".jpg,.jpeg,.png" [disabled]="!editMode" class="file-upload-input" style="display:none;">
      <p id="cibilFileName" class="file-upload-file-name"></p>
      <p id="cibilUploadMessage"></p>
    </div>
  </div>




<h3 style="text-align: left;">Address</h3>
    <mat-form-field appearance="fill">
      <mat-label>Home Address</mat-label>
      <input [(ngModel)]="borrowerDetails.address.address" name="address" matInput [disabled]="!editMode" minlength="5" maxlength="100" #address="ngModel">
      <mat-error *ngIf="address.invalid && (address.dirty || address.touched)">
        Address must be between 5 and 100 characters long.
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>City</mat-label>
      <input [(ngModel)]="borrowerDetails.address.city" name="city" matInput [disabled]="!editMode" minlength="3" maxlength="50" #city="ngModel">
      <mat-error *ngIf="city.invalid && (city.dirty || city.touched)">
        City must be between 3 and 50 characters long.
      </mat-error>
    </mat-form-field>


    <mat-form-field appearance="fill">
      <mat-label>PIN Code</mat-label>
      <input [(ngModel)]="borrowerDetails.address.pin" name="pin" matInput [disabled]="!editMode" pattern="[0-9]{6}" minlength="6" maxlength="6" #pin="ngModel">
      <mat-error *ngIf="pin.invalid && (pin.dirty || pin.touched)">
        PIN must be a 6-digit number.
      </mat-error>
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>State</mat-label>
      <input [(ngModel)]="borrowerDetails.address.state" name="state" matInput [disabled]="!editMode" minlength="3" maxlength="50" #state="ngModel">
      <mat-error *ngIf="state.invalid && (state.dirty || state.touched)">
        State must be between 3 and 50 characters long.
      </mat-error>
    </mat-form-field>



</form>
</div>
